[connection]
id=<%= @id %>
uuid=<%= @uuid %>
type=vpn
<% if @systemloginuser.empty? -%>
permissions=
<% else -%>
permissions=user:<%= @systemloginuser %>:;
<% end -%>
<% if @autoconnect -%>
autoconnect=true
<% elsif !@autoconnect.empty? -%>
autoconnect=false
<% end -%>

[vpn]
service-type=org.freedesktop.NetworkManager.openvpn
remote=<%= @remote %>
connection-type=<%= @connection_type %>
<% if @remote_random -%>
remote-random=yes
<% elsif !@remote_random.empty? -%>
remote-random=no
<% end -%>
<% if @connection_type.include? "tls" -%>
<%   if !@cert.empty? -%>
cert=<%= @cert %>
<%   end -%>
<%   if !@key.empty? -%>
key=<%= @key %>
<%   end -%>
<%   if !@cert_pass_flags.empty? -%>
cert-pass-flags=<%= @cert_pass_flags %>
<%   else -%>
cert-pass-flags=0
<%   end %>
<% end -%>
<% if @connection_type.include? "password" -%>
<%   if !@vpnloginuser.empty? -%>
username=<%= @vpnloginuser %>
<%   end -%>
<%   if !@password_flags.empty? -%>
password-flags=<%= @password_flags %>
<%   else -%>
password-flags=2
<%   end -%>
<% end -%>
<% if !@hmac.empty? -%>
auth=<%= @hmac %>
<% end -%>
<% if !@cipher.empty? -%>
cipher=<%= @cipher %>
<% end -%>
<% if @comp_lzo -%>
comp-lzo=yes
<% elsif !@comp_lzo.empty? -%>
comp-lzo=no
<% end -%>
<% if !@ca.empty? -%>
ca=<%= @ca %>
<% end -%>
<% if !@ta.empty? -%>
ta=<%= @ta %>
<% end -%>
<% if !@ta_dir.empty? -%>
ta-dir=<%= @ta_dir %>
<% end -%>
<% if !@dev_type.empty? -%>
dev-type=<%= @dev_type %>
<% end -%>

[ipv4]
method=<%= @ipv4_method %>
<% if !@routes.empty? -%>
routes1=<%= @routes %>
<% end -%>
<% if !@dns.empty? -%>
dns=<%= @dns %>
<% end -%>
<% if !@dns_search.empty? -%>
dns-search=<%= @dns_search %>
<% end -%>
<% if !@never_default.empty? -%>
never-default=<%= @never_default %>
<% end -%>

[ipv6]
method=ignore
